<?xml version="1.0" encoding="utf-8" ?>
<Project>
	<ItemGroup>
		<CSharpFiles Include="$(MSBuildProjectDirectory)\..\Measures\*.cs" />
	</ItemGroup>

	<Target Name="ELM to C#"
			BeforeTargets="Compile">
		<Message Text="Converting ELM to C#"/>
		<Exec Command='"$(SolutionDir)/Cql/PackagerCLI/bin/debug/net6.0/Hl7.Cql.Packager.exe" --canonical-root-url https://fire.ly/fhir/ --elm "$(SolutionDir)\Datasets\Demo\Elm" --cql "$(SolutionDir)\Datasets\Demo\Cql" --cs "$(MSBuildProjectDirectory)/../Measures" --fhir "$(MSBuildProjectDirectory)/../Test/Resources"' />
	</Target>
	<Target Name="Delete C#" AfterTargets="Clean">
		<Message Text="Deleting C# files...$(MSBuildProjectDirectory)\..\Measures\*.cs" />
		<Delete Files="@(CSharpFiles)" />
	</Target>
</Project>