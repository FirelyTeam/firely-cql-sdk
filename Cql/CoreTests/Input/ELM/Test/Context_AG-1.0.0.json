{
  "library": {
    "type": "Library",

    "identifier": {
      "type": "VersionedIdentifier",

      "id": "Context_AG",

      "version": "1.0.0"
    },

    "schemaIdentifier": {
      "type": "VersionedIdentifier",

      "id": "urn:hl7-org:elm",

      "version": "r1"
    },

    "usings": {
      "type": "Library$Usings",

      "def": [
        {
          "type": "UsingDef",

          "localIdentifier": "System",

          "uri": "urn:hl7-org:elm-types:r1"
        },

        {
          "type": "UsingDef",

          "locator": "3:1-3:26",

          "localIdentifier": "FHIR",

          "uri": "http://hl7.org/fhir",

          "version": "4.0.1"
        }
      ]
    },

    "contexts": {
      "type": "Library$Contexts",

      "def": [
        {
          "type": "ContextDef",

          "locator": "5:1-5:15",

          "name": "Patient"
        },

        {
          "type": "ContextDef",

          "locator": "19:1-19:18",

          "name": "Unfiltered"
        }
      ]
    },

    "statements": {
      "type": "Library$Statements",

      "def": [
        {
          "type": "ExpressionDef",

          "expression": {
            "type": "SingletonFrom",

            "operand": {
              "type": "Retrieve",

              "locator": "5:1-5:15",

              "dataType": "{http://hl7.org/fhir}Patient",

              "templateId": "http://hl7.org/fhir/StructureDefinition/Patient"
            }
          },

          "locator": "5:1-5:15",

          "name": "Patient",

          "context": "Patient"
        },

        {
          "type": "ExpressionDef",

          "expression": {
            "type": "GreaterOrEqual",

            "operand": [
              {
                "type": "CalculateAgeAt",

                "operand": [
                  {
                    "type": "Property",

                    "source": {
                      "type": "ExpressionRef",

                      "name": "Patient"
                    },

                    "path": "birthDate.value"
                  },

                  {
                    "type": "Date",

                    "year": {
                      "type": "Literal",

                      "valueType": "{urn:hl7-org:elm-types:r1}Integer",

                      "value": "2013"
                    },

                    "month": {
                      "type": "Literal",

                      "valueType": "{urn:hl7-org:elm-types:r1}Integer",

                      "value": "1"
                    },

                    "day": {
                      "type": "Literal",

                      "valueType": "{urn:hl7-org:elm-types:r1}Integer",

                      "value": "1"
                    },

                    "locator": "8:16-8:26",

                    "resultTypeName": "{urn:hl7-org:elm-types:r1}Date"
                  }
                ],

                "locator": "8:3-8:27",

                "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer",

                "precision": "Year"
              },

              {
                "type": "Literal",

                "locator": "8:32-8:33",

                "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer",

                "valueType": "{urn:hl7-org:elm-types:r1}Integer",

                "value": "16"
              }
            ],

            "locator": "8:3-8:33",

            "resultTypeName": "{urn:hl7-org:elm-types:r1}Boolean"
          },

          "locator": "7:1-8:33",

          "resultTypeName": "{urn:hl7-org:elm-types:r1}Boolean",

          "name": "In Initial Population",

          "context": "Patient",

          "accessLevel": "Public"
        },

        {
          "type": "ExpressionDef",

          "expression": {
            "type": "List",

            "element": [
              {
                "type": "ExpressionRef",

                "locator": "11:5-11:27",

                "resultTypeName": "{urn:hl7-org:elm-types:r1}Boolean",

                "name": "In Initial Population"
              }
            ],

            "resultTypeSpecifier": {
              "type": "ListTypeSpecifier",

              "elementType": {
                "type": "NamedTypeSpecifier",

                "name": "{urn:hl7-org:elm-types:r1}Boolean"
              }
            },

            "locator": "11:3-11:29"
          },

          "resultTypeSpecifier": {
            "type": "ListTypeSpecifier",

            "elementType": {
              "type": "NamedTypeSpecifier",

              "name": "{urn:hl7-org:elm-types:r1}Boolean"
            }
          },

          "locator": "10:1-11:29",

          "name": "In Initial Population List",

          "context": "Patient",

          "accessLevel": "Public"
        },

        {
          "type": "ExpressionDef",

          "expression": {
            "type": "Count",

            "source": {
              "type": "Query",

"source": [
  {
    "type": "AliasedQuerySource",

    "expression": {
      "type": "ExpressionRef",

      "resultTypeSpecifier": {
        "type": "ListTypeSpecifier",

        "elementType": {
          "type": "NamedTypeSpecifier",

          "name": "{urn:hl7-org:elm-types:r1}Boolean"
        }
      },

      "locator": "22:9-22:31",

      "name": "In Initial Population"
    },

    "resultTypeSpecifier": {
      "type": "ListTypeSpecifier",

      "elementType": {
        "type": "NamedTypeSpecifier",

        "name": "{urn:hl7-org:elm-types:r1}Boolean"
      }
    },

    "locator": "22:9-22:34",

    "alias": "IP"
  }
],

              "relationship": [],

              "where": {
                "type": "IsTrue",

                "operand": {
                  "type": "AliasRef",

                  "locator": "22:42-22:43",

                  "resultTypeName": "{urn:hl7-org:elm-types:r1}Boolean",

                  "name": "IP"
                },

                "locator": "22:36-22:51",

                "resultTypeName": "{urn:hl7-org:elm-types:r1}Boolean"
              },

              "resultTypeSpecifier": {
                "type": "ListTypeSpecifier",

                "elementType": {
                  "type": "NamedTypeSpecifier",

                  "name": "{urn:hl7-org:elm-types:r1}Boolean"
                }
              },

              "locator": "22:9-22:51"
            },

            "locator": "22:3-22:52",

            "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer"
          },

          "locator": "21:1-22:52",

          "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer",

          "name": "Initial Population Count 1",

          "context": "Unfiltered",

          "accessLevel": "Public"
        },

        {
          "type": "ExpressionDef",

          "expression": {
            "type": "ExpressionRef",

            "locator": "14:3-14:30",

            "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer",

            "name": "Initial Population Count 1"
          },

          "locator": "13:1-14:30",

          "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer",

          "name": "Count from Context 1",

          "context": "Patient",

          "accessLevel": "Public"
        },

        {
          "type": "ExpressionDef",

          "expression": {
            "type": "Count",

            "source": {
              "type": "Query",

              "source": [
                {
                  "type": "AliasedQuerySource",

                  "expression": {
                    "type": "ExpressionRef",

                    "resultTypeSpecifier": {
                      "type": "ListTypeSpecifier",

                      "elementType": {
                        "type": "NamedTypeSpecifier",

                        "name": "{urn:hl7-org:elm-types:r1}Boolean"
                      }
                    },

                    "locator": "25:9-25:36",

                    "name": "In Initial Population List"
                  },

                  "resultTypeSpecifier": {
                    "type": "ListTypeSpecifier",

                    "elementType": {
                      "type": "NamedTypeSpecifier",

                      "name": "{urn:hl7-org:elm-types:r1}Boolean"
                    }
                  },

                  "locator": "25:9-25:39",

                  "alias": "IP"
                }
              ],

              "relationship": [],

              "where": {
                "type": "IsTrue",

                "operand": {
                  "type": "AliasRef",

                  "locator": "25:47-25:48",

                  "resultTypeName": "{urn:hl7-org:elm-types:r1}Boolean",

                  "name": "IP"
                },

                "locator": "25:41-25:56",

                "resultTypeName": "{urn:hl7-org:elm-types:r1}Boolean"
              },

              "resultTypeSpecifier": {
                "type": "ListTypeSpecifier",

                "elementType": {
                  "type": "NamedTypeSpecifier",

                  "name": "{urn:hl7-org:elm-types:r1}Boolean"
                }
              },

              "locator": "25:9-25:56"
            },

            "locator": "25:3-25:57",

            "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer"
          },

          "locator": "24:1-25:57",

          "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer",

          "name": "Initial Population Count 2",

          "context": "Unfiltered",

          "accessLevel": "Public"
        },

        {
          "type": "ExpressionDef",

          "expression": {
            "type": "ExpressionRef",

            "locator": "17:3-17:30",

            "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer",

            "name": "Initial Population Count 2"
          },

          "locator": "16:1-17:30",

          "resultTypeName": "{urn:hl7-org:elm-types:r1}Integer",

          "name": "Count from Context 2",

          "context": "Patient",

          "accessLevel": "Public"
        }
      ]
    },

    "annotation": [
      {
        "type": "CqlToElmInfo",

        "translatorOptions": "EnableLocators,EnableResultTypes,EnableDetailedErrors"
      }
    ]
  }
}
